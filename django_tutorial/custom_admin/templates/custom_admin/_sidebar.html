<div class="col-md-3 col-lg-2 d-md-block bg-white sidebar shadow-sm rounded p-4 mb-4" style="height: fit-content;">
    <div class="position-sticky">
        <h5 class="fw-bold mb-4 px-2">{% if request.user.is_superuser %}Administration{% else %}Doctor Panel{% endif %}
        </h5>
        <ul class="nav flex-column gap-1">
            <li class="nav-item">
                <a class="nav-link {% if request.path == '/custom-admin/dashboard/' %}active{% endif %} fw-bold"
                    href="{% url 'custom_admin_dashboard' %}">
                    <i class="fas fa-tachometer-alt me-2" style="width: 20px;"></i> Dashboard
                </a>
            </li>

            {% if request.user.is_superuser %}
            <li class="nav-item">
                <a class="nav-link {% if 'doctors' in request.path %}active{% endif %} fw-500"
                    href="{% url 'manage_doctors' %}">
                    <i class="fas fa-user-md me-2" style="width: 20px;"></i> Manage Doctors
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link {% if 'departments' in request.path %}active{% endif %} fw-500"
                    href="{% url 'manage_departments' %}">
                    <i class="fas fa-hospital me-2" style="width: 20px;"></i> Manage Departments
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link {% if 'messages' in request.path %}active{% endif %} fw-500"
                    href="{% url 'manage_messages' %}">
                    <i class="fas fa-envelope me-2" style="width: 20px;"></i> Contact Messages
                    {% if unread_messages > 0 %}
                    <span class="badge bg-danger rounded-pill float-end">{{ unread_messages }}</span>
                    {% endif %}
                </a>
            </li>

            <hr class="my-3 text-muted">

            <li class="nav-item">
                <a class="nav-link fw-500 text-muted" href="/admin/" target="_blank">
                    <i class="fas fa-cog me-2" style="width: 20px;"></i> Django Admin
                    <i class="fas fa-external-link-alt small ms-1"></i>
                </a>
            </li>
            {% else %}
            <!-- Doctor Links -->
            <li class="nav-item">
                <a class="nav-link {% if 'appointments' in request.path %}active{% endif %} fw-500"
                    href="{% url 'my_appointments' %}">
                    <i class="fas fa-calendar-check me-2" style="width: 20px;"></i> My Appointments
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link {% if 'schedule' in request.path %}active{% endif %} fw-500"
                    href="{% url 'schedule_management' %}">
                    <i class="fas fa-clock me-2" style="width: 20px;"></i> My Schedule
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link {% if 'leaves' in request.path %}active{% endif %} fw-500"
                    href="{% url 'leave_management' %}">
                    <i class="fas fa-walking me-2" style="width: 20px;"></i> Leave Requests
                </a>
            </li>
            {% endif %}
        </ul>
    </div>
</div>

<style>
    .nav-link {
        color: #495057;
        padding: 0.8rem 1rem;
        transition: all 0.2s;
    }

    .nav-link:hover {
        background-color: #f8f9fa;
        color: #0d6efd;
        border-radius: 8px;
        transform: translateX(5px);
    }

    .nav-link.active {
        background-color: #0d6efd !important;
        color: white !important;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(13, 110, 253, 0.2);
    }

    .nav-link.active i {
        color: white !important;
    }
</style>